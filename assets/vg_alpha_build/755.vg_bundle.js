"use strict";(self.webpackChunkcustom_vf_nextjs=self.webpackChunkcustom_vf_nextjs||[]).push([[755],{9660:(e,t,n)=>{n.d(t,{Z:()=>v});var a=n(2167),r=n(7294),l=n(7897),i=n(2134),o=n(4352),s=r.createElement;function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=(0,i.Gp)((function(e,t){var n=(0,o.G)(c(c({},e),{},{ref:t})),a=n.Component,i=n.label,u=n.description,d=n.isClearable,v=n.startContent,g=n.endContent,p=n.labelPlacement,f=n.hasHelper,m=n.isOutsideLeft,b=n.shouldLabelBeOutside,h=n.errorMessage,y=n.getBaseProps,x=n.getLabelProps,w=n.getInputProps,P=n.getInnerWrapperProps,I=n.getInputWrapperProps,D=n.getMainWrapperProps,k=n.getHelperWrapperProps,O=n.getDescriptionProps,_=n.getErrorMessageProps,N=n.getClearButtonProps,W=i?s("label",x(),i):null,S=(0,r.useMemo)((function(){return d?s("span",N(),g||s(l.f,null)):g}),[d,N]),C=(0,r.useMemo)((function(){return f?s("div",k(),h?s("div",_(),h):u?s("div",O(),u):null):null}),[f,h,u,k,_,O]),Z=(0,r.useMemo)((function(){return v||S?s("div",P(),v,s("input",w()),S):s("div",P(),s("input",w()))}),[v,S,w,P]),E=(0,r.useMemo)((function(){return b?s("div",D(),s("div",I(),m?null:W,Z),C):s(r.Fragment,null,s("div",I(),W,Z),C)}),[p,C,b,W,Z,h,u,D,I,_,O]);return s(a,y(),m?W:null,E)}));d.displayName="NextUI.Input";const v=d},2931:(e,t,n)=>{n.d(t,{Z:()=>b});var a=n(7462),r=n(2167),l=n(5987),i=n(7294),o=n(262),s=n(2134),u=n(1844),c=n(8514),d=n(4352),v=["style","minRows","maxRows","cacheMeasurements","disableAutosize","onHeightChange"],g=i.createElement;function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=(0,s.Gp)((function(e,t){var n=e.style,r=e.minRows,s=void 0===r?3:r,p=e.maxRows,m=void 0===p?8:p,b=e.cacheMeasurements,h=void 0!==b&&b,y=e.disableAutosize,x=void 0!==y&&y,w=e.onHeightChange,P=(0,l.Z)(e,v),I=(0,d.G)(f(f({},P),{},{ref:t,isMultiline:!0})),D=I.Component,k=I.label,O=I.description,_=I.startContent,N=I.endContent,W=I.hasHelper,S=I.shouldLabelBeOutside,C=I.shouldLabelBeInside,Z=I.errorMessage,E=I.getBaseProps,M=I.getLabelProps,j=I.getInputProps,z=I.getInnerWrapperProps,B=I.getInputWrapperProps,T=I.getHelperWrapperProps,R=I.getDescriptionProps,F=I.getErrorMessageProps,A=(0,i.useState)(s>1),L=A[0],G=A[1],V=(0,i.useState)(!1),U=V[0],H=V[1],q=k?g("label",M(),k):null,J=j(),K=x?g("textarea",(0,a.Z)({},J,{style:(0,u.dG)(J.style,null!=n?n:{})})):g(c.Z,(0,a.Z)({},J,{cacheMeasurements:h,"data-hide-scroll":(0,o.PB)(!U),maxRows:m,minRows:s,style:(0,u.dG)(J.style,null!=n?n:{}),onHeightChange:function(e,t){if(1===s&&G(e>=2*t.rowHeight),m>s){var n=e>=m*t.rowHeight;H(n)}null==w||w(e,t)}})),X=(0,i.useMemo)((function(){return _||N?g("div",z(),_,K,N):g("div",z(),K)}),[_,J,N,z]);return g(D,E(),S?q:null,g("div",(0,a.Z)({},B(),{"data-has-multiple-rows":(0,o.PB)(L)}),C?q:null,X),W?g("div",T(),Z?g("div",F(),Z):O?g("div",R(),O):null):null)}));m.displayName="NextUI.Textarea";const b=m},4352:(e,t,n)=>{n.d(t,{G:()=>k});var a=n(2982),r=n(2167),l=n(5987),i=n(885),o=n(2134),s=n(8628),u=n(7464),c=n(3899),d=(0,u.tv)({slots:{base:" vg-group vg-flex vg-flex-col ",label:[" vg-absolute "," vg-z-10 "," vg-pointer-events-none "," vg-origin-top-left "," vg-subpixel-antialiased "," vg-block "," vg-text-small "," vg-text-foreground-500 "],mainWrapper:" vg-h-full ",inputWrapper:" vg-relative vg-w-full vg-inline-flex vg-tap-highlight-transparent vg-flex-row vg-items-center vg-shadow-sm vg-px-3 vg-gap-3 ",innerWrapper:" vg-inline-flex vg-w-full vg-items-center vg-h-full vg-box-border ",input:[" vg-w-full vg-font-normal vg-bg-transparent vg-!outline-none vg-placeholder:text-foreground-500 vg-focus-visible:outline-none "," vg-data-[has-start-content=true]:ps-1.5 "," vg-data-[has-end-content=true]:pe-1.5 "],clearButton:[" vg-p-2 "," vg--m-2 "," vg-z-10 "," vg-hidden "," vg-absolute "," vg-right-3 "," vg-appearance-none "," vg-outline-none "," vg-select-none "," vg-opacity-0 "," vg-hover:!opacity-100 "," vg-cursor-pointer "," vg-active:!opacity-70 "," vg-rounded-full "].concat((0,a.Z)(c.Dh)),helperWrapper:" vg-hidden vg-group-data-[has-helper=true]:flex vg-p-1 vg-relative vg-flex-col vg-gap-1.5 ",description:" vg-text-tiny vg-text-foreground-400 ",errorMessage:" vg-text-tiny vg-text-danger "},variants:{variant:{flat:{inputWrapper:[" vg-bg-default-100 "," vg-data-[hover=true]:bg-default-200 "," vg-group-data-[focus=true]:bg-default-100 "]},faded:{inputWrapper:[" vg-bg-default-100 "," vg-border-medium "," vg-border-default-200 "," vg-data-[hover=true]:border-default-400 "],value:" vg-group-data-[has-value=true]:text-default-foreground "},bordered:{inputWrapper:[" vg-border-medium "," vg-border-default-200 "," vg-data-[hover=true]:border-default-400 "," vg-group-data-[focus=true]:border-default-foreground "]},underlined:{inputWrapper:[" vg-!px-1 "," vg-!pb-0 "," vg-!gap-0 "," vg-relative "," vg-box-border "," vg-border-b-medium ","shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]"," vg-border-default-200 "," vg-!rounded-none "," vg-hover:border-default-300 "," vg-after:content-[''] "," vg-after:w-0 "," vg-after:origin-center "," vg-after:bg-default-foreground "," vg-after:absolute "," vg-after:left-1/2 "," vg-after:-translate-x-1/2 "," vg-after:-bottom-[2px] "," vg-after:h-[2px] "," vg-group-data-[focus=true]:after:w-full "],innerWrapper:" vg-pb-1 ",label:" vg-group-data-[filled-within=true]:text-foreground "}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{label:" vg-text-tiny ",inputWrapper:" vg-h-unit-8 vg-min-h-unit-8 vg-px-2 vg-rounded-small ",input:" vg-text-small ",clearButton:" vg-text-medium "},md:{inputWrapper:" vg-h-unit-10 vg-min-h-unit-10 vg-rounded-medium ",input:" vg-text-small ",clearButton:" vg-text-large "},lg:{inputWrapper:" vg-h-unit-12 vg-min-h-unit-12 vg-rounded-large ",input:" vg-text-medium ",clearButton:" vg-text-large "}},radius:{none:{inputWrapper:" vg-rounded-none "},sm:{inputWrapper:" vg-rounded-small "},md:{inputWrapper:" vg-rounded-medium "},lg:{inputWrapper:" vg-rounded-large "},full:{inputWrapper:" vg-rounded-full "}},labelPlacement:{outside:{mainWrapper:" vg-flex vg-flex-col "},"outside-left":{base:" vg-flex-row vg-items-center vg-flex-nowrap vg-data-[has-helper=true]:items-start ",inputWrapper:" vg-flex-1 ",mainWrapper:" vg-flex vg-flex-col ",label:" vg-relative vg-text-foreground vg-pr-2 "},inside:{label:" vg-text-tiny vg-cursor-text ",inputWrapper:" vg-flex-col vg-items-start vg-justify-center vg-gap-0 ",innerWrapper:" vg-test vg-group-data-[has-label=true]:items-end "}},fullWidth:{true:{base:" vg-w-full "}},isClearable:{true:{input:" vg-peer vg-pr-6 ",clearButton:" vg-peer-data-[filled=true]:opacity-70 vg-peer-data-[filled=true]:block "}},isDisabled:{true:{base:" vg-opacity-disabled vg-pointer-events-none ",inputWrapper:" vg-pointer-events-none ",label:" vg-pointer-events-none "}},isInvalid:{true:{label:" vg-!text-danger ",input:" vg-!placeholder:text-danger vg-!text-danger "}},isRequired:{true:{label:" vg-after:content-['*'] vg-after:text-danger vg-after:ml-0.5 "}},isMultiline:{true:{label:" vg-relative ",inputWrapper:" vg-!h-auto ",innerWrapper:" vg-items-start vg-group-data-[has-label=true]:items-start ",input:" vg-resize-none vg-data-[hide-scroll=true]:scrollbar-hide "}},disableAnimation:{true:{input:" vg-transition-none ",inputWrapper:" vg-transition-none ",label:" vg-transition-none "},false:{inputWrapper:" vg-transition-background vg-motion-reduce:transition-none vg-!duration-150 ",label:[" vg-will-change-auto "," vg-!duration-200 "," vg-!ease-out "," vg-motion-reduce:transition-none "," vg-transition-[transform,color,left,opacity] "],clearButton:[" vg-transition-opacity "," vg-motion-reduce:transition-none "]}}},defaultVariants:{variant:"flat",color:"default",size:"md",fullWidth:!0,labelPlacement:"inside",isDisabled:!1,isMultiline:!1,disableAnimation:!1},compoundVariants:[{variant:"flat",color:"default",class:{input:" vg-group-data-[has-value=true]:text-default-foreground "}},{variant:"flat",color:"primary",class:{inputWrapper:[" vg-bg-primary-50 "," vg-data-[hover=true]:bg-primary-100 "," vg-text-primary "," vg-group-data-[focus=true]:bg-primary-50 "," vg-placeholder:text-primary "],input:" vg-placeholder:text-primary ",label:" vg-text-primary "}},{variant:"flat",color:"secondary",class:{inputWrapper:[" vg-bg-secondary-50 "," vg-text-secondary "," vg-data-[hover=true]:bg-secondary-100 "," vg-group-data-[focus=true]:bg-secondary-50 "," vg-placeholder:text-secondary "],input:" vg-placeholder:text-secondary ",label:" vg-text-secondary "}},{variant:"flat",color:"success",class:{inputWrapper:[" vg-bg-success-50 "," vg-text-success-600 "," vg-dark:text-success "," vg-placeholder:text-success-600 "," vg-dark:placeholder:text-success "," vg-data-[hover=true]:bg-success-100 "," vg-group-data-[focus=true]:bg-success-50 "],input:" vg-placeholder:text-success-600 vg-dark:placeholder:text-success ",label:" vg-text-success-600 vg-dark:text-success "}},{variant:"flat",color:"warning",class:{inputWrapper:[" vg-bg-warning-50 "," vg-text-warning-600 "," vg-dark:text-warning "," vg-placeholder:text-warning-600 "," vg-dark:placeholder:text-warning "," vg-data-[hover=true]:bg-warning-100 "," vg-group-data-[focus=true]:bg-warning-50 "],input:" vg-placeholder:text-warning-600 vg-dark:placeholder:text-warning ",label:" vg-text-warning-600 vg-dark:text-warning "}},{variant:"flat",color:"danger",class:{inputWrapper:[" vg-bg-danger-50 "," vg-text-danger "," vg-dark:text-danger-500 "," vg-placeholder:text-danger "," vg-dark:placeholder:text-danger-500 "," vg-data-[hover=true]:bg-danger-100 "," vg-group-data-[focus=true]:bg-danger-50 "],input:" vg-placeholder:text-danger vg-dark:placeholder:text-danger-500 ",label:" vg-text-danger vg-dark:text-danger-500 "}},{variant:"faded",color:"primary",class:{label:" vg-text-primary ",inputWrapper:" vg-data-[hover=true]:border-primary vg-focus-within:border-primary "}},{variant:"faded",color:"secondary",class:{label:" vg-text-secondary ",inputWrapper:" vg-data-[hover=true]:border-secondary vg-focus-within:border-secondary "}},{variant:"faded",color:"success",class:{label:" vg-text-success ",inputWrapper:" vg-data-[hover=true]:border-success vg-focus-within:border-success "}},{variant:"faded",color:"warning",class:{label:" vg-text-warning ",inputWrapper:" vg-data-[hover=true]:border-warning vg-focus-within:border-warning "}},{variant:"faded",color:"danger",class:{label:" vg-text-danger ",inputWrapper:" vg-data-[hover=true]:border-danger vg-focus-within:border-danger "}},{variant:"underlined",color:"default",class:{input:" vg-group-data-[has-value=true]:text-foreground "}},{variant:"underlined",color:"primary",class:{inputWrapper:" vg-after:bg-primary ",label:" vg-text-primary "}},{variant:"underlined",color:"secondary",class:{inputWrapper:" vg-after:bg-secondary ",label:" vg-text-secondary "}},{variant:"underlined",color:"success",class:{inputWrapper:" vg-after:bg-success ",label:" vg-text-success "}},{variant:"underlined",color:"warning",class:{inputWrapper:" vg-after:bg-warning ",label:" vg-text-warning "}},{variant:"underlined",color:"danger",class:{inputWrapper:" vg-after:bg-danger ",label:" vg-text-danger "}},{variant:"bordered",color:"primary",class:{inputWrapper:" vg-group-data-[focus=true]:border-primary ",label:" vg-text-primary "}},{variant:"bordered",color:"secondary",class:{inputWrapper:" vg-group-data-[focus=true]:border-secondary ",label:" vg-text-secondary "}},{variant:"bordered",color:"success",class:{inputWrapper:" vg-group-data-[focus=true]:border-success ",label:" vg-text-success "}},{variant:"bordered",color:"warning",class:{inputWrapper:" vg-group-data-[focus=true]:border-warning ",label:" vg-text-warning "}},{variant:"bordered",color:"danger",class:{inputWrapper:" vg-group-data-[focus=true]:border-danger ",label:" vg-text-danger "}},{labelPlacement:"inside",color:"default",class:{label:" vg-group-data-[filled-within=true]:text-default-600 "}},{labelPlacement:"outside",color:"default",class:{label:" vg-group-data-[filled-within=true]:text-foreground "}},{radius:"full",size:["sm"],class:{inputWrapper:" vg-px-3 "}},{radius:"full",size:"md",class:{inputWrapper:" vg-px-4 "}},{radius:"full",size:"lg",class:{inputWrapper:" vg-px-5 "}},{disableAnimation:!1,variant:["faded","bordered"],class:{inputWrapper:" vg-transition-colors vg-motion-reduce:transition-none "}},{disableAnimation:!1,variant:"underlined",class:{inputWrapper:" vg-after:transition-width vg-motion-reduce:after:transition-none "}},{variant:["flat","faded"],class:{inputWrapper:(0,a.Z)(c.ID)}},{isInvalid:!0,variant:"flat",class:{inputWrapper:[" vg-bg-danger-50 "," vg-data-[hover=true]:bg-danger-100 "," vg-group-data-[focus=true]:bg-danger-50 "]}},{isInvalid:!0,variant:"bordered",class:{inputWrapper:" vg-!border-danger vg-group-data-[focus=true]:border-danger "}},{isInvalid:!0,variant:"underlined",class:{inputWrapper:" vg-after:bg-danger "}},{labelPlacement:"inside",size:"sm",class:{inputWrapper:" vg-h-12 vg-py-1.5 vg-px-3 "}},{labelPlacement:"inside",size:"md",class:{inputWrapper:" vg-h-14 vg-py-2 "}},{labelPlacement:"inside",size:"lg",class:{label:" vg-text-small ",inputWrapper:" vg-h-16 vg-py-2.5 vg-gap-0 "}},{labelPlacement:"inside",size:"sm",variant:["bordered","faded"],class:{inputWrapper:" vg-py-1 "}},{labelPlacement:["inside","outside"],class:{label:[" vg-group-data-[filled-within=true]:pointer-events-auto "]}},{labelPlacement:["outside","outside-left"],class:{input:" vg-h-full "}},{labelPlacement:"outside",isMultiline:!1,class:{base:" vg-group vg-relative vg-justify-end ",label:[" vg-pb-0 "," vg-z-20 "," vg-top-1/2 "," vg--translate-y-1/2 "," vg-group-data-[filled-within=true]:left-0 "]}},{labelPlacement:["inside"],class:{label:[" vg-group-data-[filled-within=true]:scale-85 "]}},{labelPlacement:["inside"],variant:"flat",class:{innerWrapper:" vg-pb-0.5 "}},{variant:"underlined",size:"sm",class:{innerWrapper:" vg-pb-1 "}},{variant:"underlined",size:["md","lg"],class:{innerWrapper:" vg-pb-1.5 "}},{labelPlacement:"inside",size:["sm","md"],class:{label:" vg-text-small "}},{labelPlacement:"inside",isMultiline:!1,size:"sm",class:{label:[" vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px)] "]}},{labelPlacement:"inside",isMultiline:!1,size:"md",class:{label:[" vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px)] "]}},{labelPlacement:"inside",isMultiline:!1,size:"lg",class:{label:[" vg-text-medium "," vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px)] "]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"sm",class:{label:[" vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px_-_theme(borderWidth.medium))] "]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"md",class:{label:[" vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px_-_theme(borderWidth.medium))] "]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"lg",class:{label:[" vg-text-medium "," vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px_-_theme(borderWidth.medium))] "]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"sm",class:{label:[" vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_5px)] "]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"md",class:{label:[" vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_3.5px)] "]}},{labelPlacement:"inside",variant:"underlined",size:"lg",isMultiline:!1,class:{label:[" vg-text-medium "," vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_4px)] "]}},{labelPlacement:"outside",size:"sm",isMultiline:!1,class:{label:[" vg-left-2 "," vg-text-tiny "," vg-group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.tiny)/2_+_16px)] "],base:" vg-data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_8px)] "}},{labelPlacement:"outside",size:"md",isMultiline:!1,class:{label:[" vg-left-3 "," vg-text-small "," vg-group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_20px)] "],base:" vg-data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_10px)] "}},{labelPlacement:"outside",size:"lg",isMultiline:!1,class:{label:[" vg-left-3 "," vg-text-medium "," vg-group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_24px)] "],base:" vg-data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_12px)] "}},{labelPlacement:"outside-left",size:"sm",class:{label:" vg-group-data-[has-helper=true]:pt-2 "}},{labelPlacement:"outside-left",size:"md",class:{label:" vg-group-data-[has-helper=true]:pt-3 "}},{labelPlacement:"outside-left",size:"lg",class:{label:" vg-group-data-[has-helper=true]:pt-4 "}},{labelPlacement:["outside","outside-left"],isMultiline:!0,class:{inputWrapper:" vg-py-2 "}},{labelPlacement:"outside",isMultiline:!0,class:{label:" vg-pb-1.5 "}},{labelPlacement:"inside",isMultiline:!0,class:{label:" vg-pb-0.5 ",input:" vg-pt-0 "}},{isMultiline:!0,disableAnimation:!1,class:{input:" vg-transition-height vg-!duration-100 vg-motion-reduce:transition-none "}},{labelPlacement:["inside","outside"],class:{label:[" vg-pe-2 "," vg-max-w-full "," vg-text-ellipsis "," vg-overflow-hidden "]}},{isMultiline:!0,radius:"full",class:{inputWrapper:" vg-data-[has-multiple-rows=true]:rounded-large "}}]}),v=n(1744),g=n(4333),p=n(8922),f=n(9869),m=n(4720),b=n(262),h=n(5897),y=n(7294),x=n(1844),w=n(4778),P=["ref","as","label","baseRef","wrapperRef","description","errorMessage","className","classNames","autoFocus","startContent","endContent","onClear","onChange","validationState","innerWrapperRef","onValueChange"];function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){var t=(0,o.oe)(e,d.variantKeys),n=(0,i.Z)(t,2),r=n[0],u=n[1],c=r.ref,I=r.as,k=r.label,O=r.baseRef,_=r.wrapperRef,N=r.description,W=r.errorMessage,S=r.className,C=r.classNames,Z=r.autoFocus,E=r.startContent,M=r.endContent,j=r.onClear,z=r.onChange,B=r.validationState,T=r.innerWrapperRef,R=r.onValueChange,F=void 0===R?function(){}:R,A=(0,l.Z)(r,P),L=(0,y.useCallback)((function(e){F(null!=e?e:"")}),[F]),G=(0,h.zk)(r.value,r.defaultValue,L),V=(0,i.Z)(G,2),U=V[0],H=V[1],q=(0,y.useState)(!1),J=q[0],K=q[1],X=I||"div",Y=!!U,Q=Y||J,$=(0,f.W)(null==C?void 0:C.base,S,Y?"is-filled":""),ee=e.isMultiline,te=(0,v.gy)(c),ne=(0,v.gy)(O),ae=(0,v.gy)(_),re=(0,v.gy)(T),le=(0,y.useCallback)((function(){H(""),te.current&&(te.current.value="",te.current.focus()),null==j||j()}),[te,H,j]),ie=(0,w.E)(D(D({},e),{},{"aria-label":(0,m.x)(null==e?void 0:e["aria-label"],null==e?void 0:e.label,null==e?void 0:e.placeholder),inputElementType:ee?"textarea":"input",onChange:H}),te),oe=ie.labelProps,se=ie.inputProps,ue=ie.descriptionProps,ce=ie.errorMessageProps,de=(0,s.Fx)({autoFocus:Z,isTextInput:!0}),ve=de.isFocusVisible,ge=de.isFocused,pe=de.focusProps,fe=(0,p.XI)({isDisabled:!(null==e||!e.isDisabled)}),me=fe.isHovered,be=fe.hoverProps,he=(0,s.Fx)(),ye=he.focusProps,xe=he.isFocusVisible,we=(0,p.L_)({onFocusWithinChange:K}).focusWithinProps,Pe=(0,p.r7)({isDisabled:!(null==e||!e.isDisabled),onPress:le}).pressProps,Ie="invalid"===B||e.isInvalid,De=(0,y.useMemo)((function(){var t;return e.labelPlacement&&"inside"!==e.labelPlacement||k?null!==(t=e.labelPlacement)&&void 0!==t?t:"inside":"outside"}),[e.labelPlacement,k]),ke=!!j||e.isClearable,Oe=!!k||!!N||!!W,_e=!!r.placeholder,Ne=!!k,We=!!N||!!W,Se="outside"===De||"outside-left"===De,Ce="inside"===De,Ze=!!te.current&&((!te.current.value||""===te.current.value||!U||""===U)&&_e),Ee="outside-left"===De,Me=!!E,je=!!Se&&("outside-left"===De||_e||"outside"===De&&Me),ze="outside"===De&&!_e&&!Me,Be=(0,y.useMemo)((function(){return d(D(D({},u),{},{isInvalid:Ie,isClearable:ke}))}),[].concat((0,a.Z)(Object.values(u)),[Ie,ke,Me])),Te=(0,y.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D(D({ref:ne,className:Be.base({class:$}),"data-slot":"base","data-filled":(0,b.PB)(Y||_e||Me||Ze),"data-filled-within":(0,b.PB)(Q||_e||Me||Ze),"data-focus-within":(0,b.PB)(J),"data-focus-visible":(0,b.PB)(ve),"data-readonly":(0,b.PB)(e.isReadOnly),"data-focus":(0,b.PB)(ge),"data-hover":(0,b.PB)(me),"data-required":(0,b.PB)(e.isRequired),"data-invalid":(0,b.PB)(Ie),"data-disabled":(0,b.PB)(e.isDisabled),"data-has-elements":(0,b.PB)(Oe),"data-has-helper":(0,b.PB)(We),"data-has-label":(0,b.PB)(Ne),"data-has-value":(0,b.PB)(!Ze)},we),t)}),[Be,$,Y,ge,me,Ie,We,Ne,Oe,Ze,Me,J,ve,Q,_e,we,e.isReadOnly,e.isRequired,e.isDisabled]),Re=(0,y.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D(D({"data-slot":"label",className:Be.label({class:null==C?void 0:C.label})},oe),e)}),[Be,oe,null==C?void 0:C.label]),Fe=(0,y.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D(D({ref:te,"data-slot":"input","data-filled":(0,b.PB)(Y),"data-filled-within":(0,b.PB)(Q),"data-has-start-content":(0,b.PB)(Me),"data-has-end-content":(0,b.PB)(!!M),className:Be.input({class:(0,f.W)(null==C?void 0:C.input,U?"is-filled":"")})},(0,x.dG)(pe,se,(0,g.z)(A,{enabled:!0,labelable:!0,omitEventNames:new Set(Object.keys(se))}),t)),{},{required:e.isRequired,"aria-readonly":(0,b.PB)(e.isReadOnly),"aria-required":(0,b.PB)(e.isRequired),onChange:(0,x.tS)(se.onChange,z)})}),[Be,U,pe,se,A,Y,Q,Me,M,null==C?void 0:C.input,e.isReadOnly,e.isRequired,z]),Ae=(0,y.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D(D({ref:ae,"data-slot":"input-wrapper","data-hover":(0,b.PB)(me),"data-focus-visible":(0,b.PB)(ve),"data-focus":(0,b.PB)(ge),className:Be.inputWrapper({class:(0,f.W)(null==C?void 0:C.inputWrapper,U?"is-filled":"")})},(0,x.dG)(e,be)),{},{onClick:function(e){te.current&&e.currentTarget===e.target&&te.current.focus()},style:D({cursor:"text"},e.style)})}),[Be,me,ve,ge,U,null==C?void 0:C.inputWrapper]),Le=(0,y.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D(D({},e),{},{ref:re,"data-slot":"inner-wrapper",onClick:function(e){te.current&&e.currentTarget===e.target&&te.current.focus()},className:Be.innerWrapper({class:(0,f.W)(null==C?void 0:C.innerWrapper,null==e?void 0:e.className)})})}),[Be,null==C?void 0:C.innerWrapper]),Ge=(0,y.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D(D({},e),{},{"data-slot":"main-wrapper",className:Be.mainWrapper({class:(0,f.W)(null==C?void 0:C.mainWrapper,null==e?void 0:e.className)})})}),[Be,null==C?void 0:C.mainWrapper]),Ve=(0,y.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D(D({},e),{},{"data-slot":"helper-wrapper",className:Be.helperWrapper({class:(0,f.W)(null==C?void 0:C.helperWrapper,null==e?void 0:e.className)})})}),[Be,null==C?void 0:C.helperWrapper]),Ue=(0,y.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D(D(D({},e),ue),{},{"data-slot":"description",className:Be.description({class:(0,f.W)(null==C?void 0:C.description,null==e?void 0:e.className)})})}),[Be,null==C?void 0:C.description]),He=(0,y.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D(D(D({},e),ce),{},{"data-slot":"error-message",className:Be.errorMessage({class:(0,f.W)(null==C?void 0:C.errorMessage,null==e?void 0:e.className)})})}),[Be,ce,null==C?void 0:C.errorMessage]),qe=(0,y.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return D(D({},e),{},{role:"button",tabIndex:0,"data-slot":"clear-button","data-focus-visible":(0,b.PB)(xe),className:Be.clearButton({class:(0,f.W)(null==C?void 0:C.clearButton,null==e?void 0:e.className)})},(0,x.dG)(Pe,ye))}),[Be,xe,Pe,ye,null==C?void 0:C.clearButton]);return{Component:X,classNames:C,domRef:te,label:k,description:N,startContent:E,endContent:M,labelPlacement:De,isClearable:ke,isInvalid:Ie,hasHelper:We,hasStartContent:Me,isLabelOutside:je,isOutsideLeft:Ee,isLabelOutsideAsPlaceholder:ze,shouldLabelBeOutside:Se,shouldLabelBeInside:Ce,hasPlaceholder:_e,errorMessage:W,getBaseProps:Te,getLabelProps:Re,getInputProps:Fe,getMainWrapperProps:Ge,getInputWrapperProps:Ae,getInnerWrapperProps:Le,getHelperWrapperProps:Ve,getDescriptionProps:Ue,getErrorMessageProps:He,getClearButtonProps:qe}}},8871:(e,t,n)=>{n.d(t,{Z:()=>I});var a=n(7462),r=n(2167),l=n(5861),i=n(885),o=n(4687),s=n.n(o),u=n(7294),c=n(6271),d=n(9660),v=n(3850),g=n(3711),p=n(7516),f=n(7828),m=n(7619),b=n(7479),h=n(231),y=n(7693),x=u.createElement;function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const I=function(e){var t=(0,b.F)().getColor,n=(0,u.useState)(e.default||null),r=n[0],o=n[1],w=(0,u.useState)(!1),I=(w[0],w[1]),D=(0,u.useState)(0),k=D[0],O=D[1],_=(0,u.useState)(0),N=_[0],W=_[1],S=u.useState({fileName:!1}),C=(0,i.Z)(S,2),Z=(C[0],C[1]),E=(0,u.useState)(!1),M=E[0],j=E[1],z=u.useRef(null),B=(0,c.cF)(g.l2,"voiceglow-cdn");u.useEffect((function(){return function(){N&&(null==N||N.cancel())}}),[N]);var T=function(){var t=(0,l.Z)(s().mark((function t(){var n,a,r,i,u,d,v,g,p;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(e){var t=document.createElement("input");t.type="file",t.onchange=function(t){var n=t.target.files[0];e(n)},t.click()}));case 2:if((a=t.sent)&&((r=new FileReader).onload=function(){var e=(0,l.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.result,{type:"file",payload:{name:a.name,size:a.size,type:a.type,base64:n}};case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.readAsDataURL(a)),!e.isDisabled){t.next=6;break}return t.abrupt("return");case 6:if(o(""),i=a.size,u=e.path||"/public",(null===(n=a.name)||void 0===n||null===(n=n.split(".")[1])||void 0===n?void 0:n.toLowerCase())||!1,!e.maxSizeMB){t.next=14;break}if(!(1e6*e.maxSizeMB<i)){t.next=14;break}return alert("Max size: ".concat(e.maxSizeMB," MBs")),t.abrupt("return");case 14:e.accept,d=Math.random().toString(36).slice(2,10),v="".concat(u,"/").concat(d,"_.").concat(a.name.split(".")[1]),g=(0,c.iH)(B,"".concat(v)),p=(0,c.B0)(g,a,{cacheControl:"public,max-age=31536000"}),W(p),p.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);O(t)}),(function(e){}),(function(){(0,c.Jt)(g).then(function(){var t=(0,l.Z)(s().mark((function t(n){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={url:n,path:"".concat(u),id:e.id||!1,dbFilePath:v,filename:a.name.split(".")[0],sizeKB:Math.round(i/1024)},e.callback&&e.callback(r),o(n),Z((function(e){return P(P({},e),{},{fileName:a.name})})),I(!1),O(0);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})),I(!0);case 22:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,u.useEffect)((function(){var e=z.current,t=function(t){e&&!e.contains(t.target)&&j(!1)};return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t)}}),[]),x("div",{ref:z,className:" ".concat(e.className||" vg-w-full vg-h-full "," vg-relative vg-z-[10] vg-upload-float-container ")},x(f.M,null,M?x(y.Z,{key:"uploadOptions",className:" vg-flex vg-flex-col vg-p-4 vg-rounded-large vg-absolute ".concat("top"===e.overlayPosition?" vg-bottom-[-50%] vg-right-[-200%] ":" vg-top-[100%] vg-left-0 "," vg-z-[999] vg-w-[250px] vg-bg-background vg-gap-2 ")},x(d.Z,{label:"URL",placeholder:"Link to a File",value:r,onValueChange:function(e){o(e),Z((function(e){return P(P({},e),{},{fileName:!1})}))},endContent:x(v.Z,{onPress:function(){j((function(e){return!e})),e.callback&&e.callback({url:r,path:"",id:"",dbFilePath:"",filename:"",sizeKB:0})},isIconOnly:!0},x(h.l_A,{className:" "}))}),x(v.Z,{className:" vg-flex vg-flex-col vg-gap-unit-1 vg-h-auto vg-py-unit-2 ",size:"sm",variant:"solid",onPress:function(){T()}},"Upload",e.maxSizeMB?x("span",{className:" vg-text-[10px] "},e.maxSizeMB," MBs Max"):null)):null),x(v.Z,(0,a.Z)({color:"primary",variant:"light",isIconOnly:!0},e.buttonProps,{onPress:function(){e.noOptions?T():j((function(e){return!e}))},className:" vg-w-full vg-h-full vg-relative ".concat(e.showEditIcon?" vg-flex vg-flex-col ":" "," ").concat(e.className," ")}),x(m.E.div,{className:" vg-absolute vg-bottom-0 vg-right-0 vg-z-1 vg-rotate-x-180 ",animate:{width:"100%",height:"".concat(100===k?0:k,"%"),backgroundColor:"".concat(t("success-500")),bottom:0},transition:{type:"spring",stiffness:600,damping:60,mass:.6}}),x("div",{className:" vg-relative vg-w-full vg-h-full vg-bottom-0 vg-left-0 vg-z-10 vg-flex vg-justify-center vg-items-center "},e.children),e.showEditIcon?x(p.y1O,{className:" vg-w-6 vg-h-6 vg-mt-[-10px] "}):null))}},8676:(e,t,n)=>{n.r(t),n.d(t,{RuntimeProvider:()=>C,default:()=>Z,handlePushMessageNoInteract:()=>W,useRuntime:()=>N});var a=n(2982),r=n(2167),l=n(885),i=n(5861),o=n(4687),s=n.n(o),u=n(7294),c=n(381),d=n.n(c),v=n(3711),g=n(1148),p=n(9332),f=n(7844),m=n.n(f),b=n(1194),h=n(3953),y=n(6677),x=n(1300),w=n(4070),P=n(8965),I=n(4925),D=u.createElement;function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=(0,u.createContext)("");function N(){var e=(0,u.useContext)(_);if(!e)throw new Error("useUserContext must be used within a UserProvider");return e}function W(e){return S.apply(this,arguments)}function S(){return(S=(0,i.Z)(s().mark((function e(t){var n,a,r,l,i,o,u,c,v,p,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.agentID,a=t.userID,r=t.messages,l=t.bucket,i=t.action,o=t.origin,u=t.appendAtStart,c=t.safeAgentData,v=t.vf_variables,p="gb-chat"===o||"vg"===(null==c?void 0:c.agentPlatform)||"web-chat"===o||"discord"===o||"messenger"===o||"instagram"===o?"".concat((0,b.MC)({region:"voiceglow-eu"===l?"eu":"na"}),"/agents/").concat(n,"/interact/").concat(a):"".concat((0,g.Sw)({region:"voiceglow-eu"===l?"eu":"na"}),"/vg/").concat(n,"/vf/interact/").concat(a),e.next=4,fetch(p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({origin:o,appendMessages:null!=r&&r.length?null==r?void 0:r.map((function(e){return O(O({},e),{},{ts:e.ts||d()().unix()})})):void 0,action:i||void 0,appendAtStart:u||!1,variables:v||{},transcriptMetadata:{origin:o}})}).then((function(e){return e.json()}));case 4:return f=e.sent,e.abrupt("return",f);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(e){var t,n,r,o,c,f,k,N,S,C,Z,E=(0,I.B)().config,M=(0,p.useParams)(),j=(0,p.useSearchParams)(),z=(0,p.usePathname)(),B=(null==E?void 0:E.ID)||(null==j?void 0:j.get("vg_id"))||(null==M?void 0:M.vg_id)||(null===(t=e.variables)||void 0===t?void 0:t.ID),T={userID:(null==E?void 0:E.userID)||"".concat(B,"_").concat((0,b.D1)()),loading:!0,chatHistory:[],lastResponse:null,defaultMessageDelay:1e3,variables:e.variables,reload:!1,blockInput:!1,shouldSyncBrowser:!1,blockLoading:!1,blockProactive:!1,blockAll:!1,hasInitStats:!1,manualControl:(null===(n=e.variables)||void 0===n?void 0:n.manualControl)||!1,agentName:"",lang:(null===(r=e.variables)||void 0===r?void 0:r.lang)||"en",showInstantly:!1,isSuperAdmin:!1,showVapiUI:(null==e||null===(o=e.variables)||void 0===o||null===(o=o.vapiConfig)||void 0===o?void 0:o.promptOnWeb)||!1,callOngoing:!1,debugMessages:[],tabKey:"home",sessions:[],selectedSessionId:"",orgUsers:[]},R=m()("runtime_local_".concat(B),T),F=(0,l.Z)(R,2),A=F[0],L=F[1],G=u.useState("undefined"!=typeof window?!B||null==A||!A.userID||(null==A||null===(c=A.variables)||void 0===c?void 0:c.ID)!==B||null!==(f=A.variables)&&void 0!==f&&f.chatForget||null!==(k=e.variables)&&void 0!==k&&k.chatForget||null!=E&&E.userID&&(null==E?void 0:E.userID)!==(null==A?void 0:A.userID)?T:A:T),V=(0,l.Z)(G,2),U=V[0],H=V[1],q=u.useState(!1),J=(0,l.Z)(q,2),K=J[0],X=J[1],Y=u.useState(null),Q=(0,l.Z)(Y,2),$=Q[0],ee=Q[1],te=u.useState([]),ne=(0,l.Z)(te,2),ae=ne[0],re=ne[1],le=u.useState("undefined"!=typeof window?null===(N=window.location)||void 0===N?void 0:N.href:""),ie=(0,l.Z)(le,2),oe=ie[0],se=ie[1],ue=u.useState(!1),ce=(0,l.Z)(ue,2),de=ce[0],ve=ce[1],ge=(0,u.useState)("undefined"!=typeof window?"eu"===(null==E?void 0:E.region)||"eu"===(null==M?void 0:M.region)?"voiceglow-eu":"(default)":(null==U||null===(S=U.variables)||void 0===S?void 0:S.region)||"(default)"),pe=ge[0],fe=(ge[1],(0,h.ad)(v.l2,pe)),me=(0,y.ky)((0,h.JU)(fe,"voiceglow/".concat(B,"/convos/").concat(U.userID||"UNDEFINED","/convo/JSON_STRING")),{snapshotListenOptions:{includeMetadataChanges:!1}}),be=(0,l.Z)(me,3),he=be[0],ye=be[1],xe=(be[2],(0,y.ky)((0,h.JU)(fe,"voiceglow/".concat(B,"/convos/").concat(U.userID||"UNDEFINED")),{snapshotListenOptions:{includeMetadataChanges:!1}})),we=(0,l.Z)(xe,3),Pe=we[0],Ie=(we[1],we[2],u.useState({})),De=(0,l.Z)(Ie,2),ke=De[0],Oe=De[1],_e=u.useState([]),Ne=(0,l.Z)(_e,2),We=Ne[0],Se=Ne[1],Ce=u.useState(!1),Ze=(0,l.Z)(Ce,2),Ee=Ze[0],Me=Ze[1],je=u.useState(!1),ze=(0,l.Z)(je,2),Be=ze[0],Te=ze[1],Re=u.useState(!1),Fe=(0,l.Z)(Re,2),Ae=(Fe[0],Fe[1]),Le=(null==ke?void 0:ke.chatAssignedTo)&&"human-chatting"===(null==ke?void 0:ke.state),Ge=m()("geo-data",{ip:"",country:""}),Ve=(0,l.Z)(Ge,2),Ue=Ve[0];Ve[1];function He(){return(He=(0,i.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat((0,g.Sw)({region:"voiceglow-eu"===pe?"eu":"na"}),"/vg/").concat(null==U||null===(t=U.variables)||void 0===t?void 0:t.ID,"/safe-data")).then((function(e){return e.json()})).catch((function(e){}));case 2:null!=(n=e.sent)&&n.orgUsers?H((function(e){return O(O({},e),{},{orgUsers:n.orgUsers})})):H((function(e){return O(O({},e),{},{orgUsers:[]})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(){return(qe=(0,i.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Be&&clearTimeout(Be),e.next=3,fetch("".concat((0,g.Kk)({region:"voiceglow-eu"===pe?"eu":"na"}),"/fb?doc_id=clients/").concat(t.chatAssignedTo)).then((function(e){return e.json()}));case 3:n=e.sent,H((function(e){return O(O({},e),{},{blockInput:!1,manualControl:!0,notice:O(O({},e.notice),{},{custom:"",active:!1})})})),H((function(e){var t;return O(O({},e),{},{agentName:(null===(t=n.name)||void 0===t?void 0:t.split(" ")[0])||""})}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,i.Z)(s().mark((function e(t){var n,a,r,l,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Be&&clearTimeout(Be),H((function(e){return O(O({},e),{},{manualControl:!1,blockInput:!0,agentName:"",notice:O(O({},e.notice),{},{custom:null})})})),e.next=5,(0,h.pl)((0,h.JU)(fe,"voiceglow/".concat(B,"/convos/").concat(U.userID||"UNDEFINED")),{state:"ai-chatting",chatAssignedTo:null,lastModified:d()().unix()},{merge:!0});case 5:return l=We.findLastIndex((function(e){return e.isAIGenerated})),e.next=8,(0,b.cG)({text:"No response from team..",translateTo:(null===(n=U.variables)||void 0===n?void 0:n.lang)||"en"});case 8:return i=e.sent,(null===(a=We[l])||void 0===a||null===(a=a.messages)||void 0===a?void 0:a.filter((function(e){return null==e?void 0:e.isAIGenerated})))||[],e.next=12,W({origin:"web-chat",agentID:U.variables.ID,userID:U.userID,messages:[{from:"bot",type:"info:default",item:i,delay:0}],bucket:pe,action:t&&"vg"!==(null==U||null===(r=U.variables)||void 0===r?void 0:r.agentPlatform)?{type:"intent",payload:{entities:[],intent:{name:"VG_HANDOFF_EXIT"},name:"VG_HANDOFF_EXIT",query:"VG_HANDOFF_EXIT"}}:void 0,safeAgentData:U.variables});case 12:if(t){e.next=15;break}return e.next=15,nt(JSON.stringify({type:"VGVF_Channel",payload:i}),{type:"reject"});case 15:H((function(e){return O(O({},e),{},{blockInput:!1,manualControl:!1,agentName:"",notice:O(O({},e.notice),{},{custom:null})})})),e.next=20;break;case 18:e.prev=18,e.t0=e.catch(0);case 20:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}function Xe(e){return Ye.apply(this,arguments)}function Ye(){return Ye=(0,i.Z)(s().mark((function e(t){var n,a,r,l,o,u,c,v,g;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.actionMessage,l=t.instant,o=0,!r||l){e.next=6;break}return We.forEach((function(e){e.messages.forEach((function(e){e.delay&&(o+=e.delay)}))})),e.next=6,new Promise((function(e){return setTimeout(e,o)}));case 6:return H((function(e){return O(O({},e),{},{manualControl:!1,blockInput:!1,notice:O(O({},e.notice),{},{custom:D(w.Z,null)})})})),u=l?6e4:1e3*(null==r||null===(n=r.item)||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.timeout)||6e4,e.next=10,(0,b.cG)({text:"Please wait, we're notifying the team..",translateTo:(null===(a=U.variables)||void 0===a?void 0:a.lang)||"en"});case 10:return c=e.sent,v=[W({origin:"web-chat",agentID:U.variables.ID,userID:U.userID,messages:[{from:"human",type:"info:default",item:c,delay:0}],bucket:pe,safeAgentData:U.variables}),(0,h.pl)((0,h.JU)(fe,"voiceglow/".concat(B,"/convos/").concat(U.userID||"UNDEFINED")),{state:"requested_chat",lastModified:d()().unix()},{merge:!0})],e.next=14,Promise.allSettled(v);case 14:e.sent,g=setTimeout((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Je();case 1:case"end":return e.stop()}}),e)}))),u),Te(g);case 17:case"end":return e.stop()}}),e)}))),Ye.apply(this,arguments)}function Qe(e,t){return $e.apply(this,arguments)}function $e(){return $e=(0,i.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach(function(){var e=(0,i.Z)(s().mark((function e(t){var a,r,l,o,u,c,v,g,p,f,m,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("GetBrowserData"!==t.type){e.next=4;break}return r=(0,b.zD)(),e.next=4,nt(JSON.stringify({from:"bot",type:"VGVF_Channel",data:O(O({},r),{},{ip:Ue.ip,country:Ue.country}),ts:d()().unix()}));case 4:if("SetRuntime"!==t.type){e.next=11;break}if(u=null===(l=t.item)||void 0===l||null===(l=l.payload)||void 0===l?void 0:l.action,c=null===(o=t.item)||void 0===o||null===(o=o.payload)||void 0===o?void 0:o.payload,"request_handoff"!==u||!n.find((function(e){return"human"===e.from}))){e.next=10;break}return e.next=10,Xe({actionMessage:t});case 10:"set_variables"===u&&H((function(e){return O(O({},e),{},{variables:O(O({},e.variables),c||{})})}));case 11:"no-reply"!==t.type||null!=U&&null!==(a=U.variables)&&void 0!==a&&a.disableNoReplyListener||(g=JSON.stringify(null==t?void 0:t.item),p=0,We.forEach((function(e){e.messages.forEach((function(e){e.delay&&(p+=e.delay)}))})),null!=t&&null!==(v=t.item)&&void 0!==v&&null!==(v=v.payload)&&void 0!==v&&v.timeout&&(m=p+1e3*(null==t||null===(f=t.item)||void 0===f||null===(f=f.payload)||void 0===f?void 0:f.timeout),h=setTimeout((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H((function(e){return O(O({},e),{},{manualControl:!1,blockInput:!1,notice:O(O({},e.notice),{},{custom:null,active:!1})})})),e.next=3,nt(g,O({},t.item));case 3:case"end":return e.stop()}}),e)}))),m),ve(h)));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),$e.apply(this,arguments)}function et(e,t,n,a){return tt.apply(this,arguments)}function tt(){return(tt=(0,i.Z)(s().mark((function t(n,r,l,i){var o,u,c,v,p,f,m,h,y,w,I,D,k,_,N,W,S,C,Z,M,j,B,T,R,F,A,L;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||"UNDEFINED"===n||"undefined"===n||n===(null===(o=U.variables)||void 0===o?void 0:o.ID)||null==U||null===(u=U.variables)||void 0===u||!u.ID||"undefined"===(null==U||null===(c=U.variables)||void 0===c?void 0:c.ID)||e.isChatHistory){t.next=31;break}if(t.prev=1,"vg"!==(null===(v=U.variables)||void 0===v?void 0:v.agentPlatform)){t.next=14;break}return H((function(e){return O(O({},e),{},{loading:!0})})),"",[],M=0,null==U||null===(Z=U.variables)||void 0===Z||null===(Z=Z.internal)||void 0===Z||Z.websocketServer,j="".concat((0,g.bR)({region:"voiceglow-eu"===pe?"eu":"na"}),"/interact"),(B=new WebSocket(j)).onopen=function(){var e,t,a,l;H((function(e){return O(O({},e),{},{debugMessages:[]})})),[];var i="start"===r?"start":r.payload;if(i){var o={agentId:U.variables.ID,convoId:n,bucket:pe,prompt:i,agentData:U.variables,lightConvoData:O(O({},ke),{},{userName:(null==E||null===(e=E.user)||void 0===e?void 0:e.name)||(null==ke?void 0:ke.userName),userEmail:(null==E||null===(t=E.user)||void 0===t?void 0:t.email)||(null==ke?void 0:ke.userEmail),userPhone:(null==E||null===(a=E.user)||void 0===a?void 0:a.phone)||(null==ke?void 0:ke.userPhone),userImage:(null==E||null===(l=E.user)||void 0===l?void 0:l.photoUrl)||(null==ke?void 0:ke.userImage)})};B.send(JSON.stringify(o))}},B.onmessage=function(t){var n=JSON.parse(t.data);if("metadata"!==n.type)if("debug"!==n.type){var r;if("action"===(null==n?void 0:n.type))"request_handoff"===(null==n||null===(r=n.action)||void 0===r?void 0:r.type)&&Xe({actionMessage:null,instant:!0});if(n.ui_engine){var l=n.chunk;try{var i,o=(0,P.Z)(l.trim()||"[]"),s={from:"bot",messages:[],ts:d()().unix()};try{s=JSON.parse(o)}catch(e){}null!==(i=s)&&void 0!==i&&null!==(i=i.messages)&&void 0!==i&&i.length&&Se((function(e){var t=e[(null==e?void 0:e.length)-1];return 0===M||"bot"!==(null==t?void 0:t.from)?[].concat((0,a.Z)(e),[s]):(e[e.length-1]=s,(0,a.Z)(e))}))}catch(e){}}else"chunk"===n.type&&Se((function(e){var t=e[(null==e?void 0:e.length)-1];if(0===M||"bot"!==(null==t?void 0:t.from))return[].concat((0,a.Z)(e),[{from:"bot",messages:[{from:"bot",type:"text",item:{payload:{message:n.chunk}},ts:d()().unix()}]}]);var r,l=(0,a.Z)(e);if(null!==(r=l[l.length-1])&&void 0!==r&&null!==(r=r.messages)&&void 0!==r&&r.length){var i=l[l.length-1].messages.length-1;return-1!==i&&(l[l.length-1].messages[i].item.payload.message+=n.chunk),(0,a.Z)(l)}return e}));M++}else e.isTest&&!z.includes("prototype")&&H((function(e){return O(O({},e),{},{debugMessages:[].concat((0,a.Z)(e.debugMessages),[{type:"debug",content:n.chunk}])})}))},B.onclose=function(){H((function(e){return O(O({},e),{},{loading:!1})}))},B.onerror=function(e){H((function(e){return O(O({},e),{},{loading:!1})}))},t.abrupt("return");case 14:return T=(null==E?void 0:E.vf_variables)||{},R=(null==e?void 0:e.isTest)||!1,t.next=18,fetch("".concat((0,b.MC)({region:"voiceglow-eu"===pe?"eu":"na"}),"/agents/").concat(U.variables.ID,"/interact/").concat(n),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vg_id:U.variables.ID,action:r,runtime:{variables:e.variables||U.variables,lang:"automatic"===(null===(p=U.variables)||void 0===p?void 0:p.lang)||"automatic"===(null===(f=e.variables)||void 0===f?void 0:f.lang)?(null===(m=navigator)||void 0===m||null===(m=m.language)||void 0===m?void 0:m.split("-")[0])||"en":(null==e||null===(h=e.variables)||void 0===h?void 0:h.lang)||(null==U||null===(y=U.variables)||void 0===y?void 0:y.lang)},inititalTurns:U.reload?[]:l,isTest:R,variables:O(O(O({userOs:(0,b.Ij)()},T),U.variables),i),appendAtStart:!0,origin:"web-chat",transcriptMetadata:O(O({},ke||{}),{},{userName:(null==E||null===(w=E.user)||void 0===w?void 0:w.name)||(null==ke?void 0:ke.userName),userEmail:(null==E||null===(I=E.user)||void 0===I?void 0:I.email)||(null==ke?void 0:ke.userEmail),userPhone:(null==E||null===(D=E.user)||void 0===D?void 0:D.phone)||(null==ke?void 0:ke.userPhone),userImage:(null==E||null===(k=E.user)||void 0===k?void 0:k.photoUrl)||(null==ke?void 0:ke.userImage)})})}).then((function(e){return e.json()})).catch((function(e){}));case 18:return null!=(F=t.sent)&&null!==(_=F.turns)&&void 0!==_&&_.length||!e.isTest||Se(null!==(A=U.variables)&&void 0!==A&&A.VF_DIALOGUE_API_KEY?x.b:x.s),L=null==F||null===(N=F.turns)||void 0===N||null===(N=N[(null==F||null===(W=F.turns)||void 0===W?void 0:W.length)-1])||void 0===N?void 0:N.messages,We[We.length-1],null!==(S=F.actionMessages)&&void 0!==S&&S.length&&Qe(F.actionMessages,null==F?void 0:F.turns),null!=F&&null!==(C=F.turns)&&void 0!==C&&C.length&&(Se(F.turns),document.dispatchEvent(new CustomEvent("VG_Events",{detail:{event:"new_turn",data:L,ts:d()().unix()}}))),t.abrupt("return",F);case 27:return t.prev=27,t.t0=t.catch(1),null!=e&&e.isTest&&rt(e.isTest?"Please double check your VF API key is correct, and have a published version.":"Error Occured, Please restart the chat.","fail",5e3),t.abrupt("return",!1);case 31:case"end":return t.stop()}}),t,null,[[1,27]])})))).apply(this,arguments)}u.useEffect((function(){var e;"tabs"===(null==U||null===(e=U.variables)||void 0===e||null===(e=e.ui)||void 0===e?void 0:e.widgetType)&&(!function(){He.apply(this,arguments)}(),fetch("".concat((0,b.MC)({region:"voiceglow-eu"===pe?"eu":"na"}),"/agents/").concat(U.variables.ID,"/convos/").concat(U.userID,"/sessions")).then((function(e){return e.json()})).then((function(e){if(null!=e&&e.data){var t=null==e?void 0:e.data;H((function(e){return O(O({},e),{},{sessions:t})}))}else H((function(e){return O(O({},e),{},{sessions:[]})}))})))}),[U.userID,null==U||null===(C=U.variables)||void 0===C||null===(C=C.ui)||void 0===C?void 0:C.widgetType,null==U?void 0:U.tabKey,null==U?void 0:U.selectedSessionId]),u.useEffect((function(){L(U)}),[U]),u.useEffect((function(){var t;null!==(t=U.variables)&&void 0!==t&&t.manualControl&&H((function(t){var n;return O(O({},t),{},{manualControl:(null==U?void 0:U.manualControl)||(null===(n=U.variables)||void 0===n?void 0:n.manualControl)||!1,isSuperAdmin:e.isTest||!1})}))}),[U.variables]),u.useEffect((function(){e.isTest&&H((function(e){return O(O({},e),{},{isSuperAdmin:!0})}))}),[null==e?void 0:e.isTest]),u.useEffect((function(){null!=E&&E.userID&&(null==E?void 0:E.userID)!==(null==A?void 0:A.userID)&&H((function(e){return O(O({},e),{},{userID:(null==E?void 0:E.userID)||"",reload:!0})}))}),[null==E?void 0:E.userID,null==A?void 0:A.userID]),u.useEffect((function(){if(null!=Pe&&Pe.exists()&&U.userID){if(null!=Pe&&Pe.data()&&!1===U.reload){var e=O(O({},Pe.data()),{},{ID:Pe.id});if("human-chatting"===e.state&&e.chatAssignedTo&&(Be&&clearTimeout(Be),Ae(!0),function(e){qe.apply(this,arguments)}(e),Be&&clearTimeout(Be)),"requested_chat"===e.state&&!e.chatAssignedTo){var t,n;H((function(e){return O(O({},e),{},{blockInput:!0,manualControl:!1})}));var a=(null===(t=We[We.length-1])||void 0===t||null===(t=t.messages[(null===(n=We[We.length-1])||void 0===n||null===(n=n.messages)||void 0===n?void 0:n.length)-1])||void 0===t?void 0:t.ts)||null;a&&d()().unix()>d().unix(a).add(60,"seconds").unix()&&Je()}return"ai-chatting"===e.state&&(Be&&clearTimeout(Be),Be&&clearTimeout(Be),H((function(e){return O(O({},e),{},{blockInput:!1,manualControl:!1,agentName:"",notice:O(O({},e.notice),{},{custom:null})})}))),Oe(e)}return Oe({})}}),[Pe,U.userID]),u.useEffect((function(){if(null!=he&&he.exists()&&U.userID){if(Me(!0),null!=he&&he.data()){var e,t=JSON.parse((null===(e=he.data())||void 0===e?void 0:e.convoTurns_JSON_STRING)||"[]");t.find((function(e){return e.messages.find((function(e){return e.content||e.rawItem}))}))&&(t=t.map((function(e){return O(O({},e),{},{messages:e.messages.map((function(e){return O(O({},e),{},{item:e.rawItem||e.content||e.item})}))})})));var n=t.map((function(e){return O(O({},e),{},{messages:e.messages.map((function(e){return O(O({},e),{},{isLoading:!1})}))})}));Se((function(){return(0,a.Z)(n)}))}else Ae(!1),Se([]);U.userID&&Me(!0)}else Me(void 0!==he||!0===Ee)}),[he,U.userID]),u.useEffect((function(){var e,t;se(z),H((function(e){return O(O({},e),{},{bucket:pe,region:"voiceglow-eu"===pe?"eu":"na"})})),L((function(e){return O(O({},e),{},{bucket:pe,region:"voiceglow-eu"===pe?"eu":"na"})})),(null!==(e=U.chatHistory)&&void 0!==e&&e.find((function(e){return e.content}))||null!==(t=A.chatHistory)&&void 0!==t&&t.find((function(e){return e.content})))&&H((function(e){return O(O({},e),{},{reload:!0})}))}),[]),u.useEffect((function(){var e,t;oe!==(null===(e=window.location)||void 0===e?void 0:e.href)&&null!==(t=U.variables)&&void 0!==t&&t.listenForUrlChanges&&!z.includes("/agents/vf?vg_id")&&nt(JSON.stringify({type:"VGVF_Channel"}),{type:"intent",payload:{entities:[],intent:{name:"VG_URL_CHANGE"},name:"VG_URL_CHANGE",query:"VG_URL_CHANGE"}})}),[z]),u.useEffect((function(){e.variables&&(H((function(t){return O(O({},t),{},{variables:e.variables})})),L((function(t){return O(O({},t),{},{variables:e.variables})})))}),[e.variables]);var nt=function(){var e=(0,i.Z)(s().mark((function e(t,n,r,l,i,o,u){var c,v,g,p,f,m,b,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null==ke?void 0:ke.totalUserInteractions)>=(null==U||null===(c=U.variables)||void 0===c||null===(c=c.limits)||void 0===c?void 0:c.maxInteractionsPerUserId)&&null!=U&&null!==(v=U.variables)&&void 0!==v&&null!==(v=v.limits)&&void 0!==v&&v.maxInteractionsPerUserId)){e.next=2;break}return e.abrupt("return",rt("Sorry, you've reached the maximum interactions limit.","fail",5e3));case 2:de&&clearTimeout(de),Be&&clearTimeout(Be),g=!1,p={},!1;try{"VGVF_Channel"!==(null==(f=JSON.parse(t))?void 0:f.type)&&"no-reply"!==(null==f?void 0:f.type)&&"VG_Response"!==(null==f?void 0:f.type)||(g=!0,f.vf_variables&&(p=f.vf_variables))}catch(e){g=!1}if(m=n||{type:"text",payload:t},b={from:o||"human",type:"text",item:{payload:{message:t}},ts:d()().unix(),isLoading:!!Le},h={from:o||"human",ts:d()().unix(),messages:[b]},!g&&Se((function(e){return[].concat((0,a.Z)(e),[h])})),!i&&l&&Se((function(e){return[].concat((0,a.Z)(e),[l])})),!Le&&!U.manualControl){e.next=18;break}return W({agentID:U.variables.ID,userID:U.userID,bucket:U.bucket,messages:[b],safeAgentData:U.variables}),e.abrupt("return");case 18:et(U.userID,m,null!=l&&l.from?[].concat((0,a.Z)(We),[l]):g?null:[].concat((0,a.Z)(We),[h]),p).catch((function(e){}));case 19:case"end":return e.stop()}}),e)})));return function(t,n,a,r,l,i,o){return e.apply(this,arguments)}}();function at(){return(at=(0,i.Z)(s().mark((function e(t,n){var r,l,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={from:n||"human",ts:d()().unix(),messages:t.map((function(e){return{from:n||"human",type:"text",item:{payload:{message:e}},ts:d()().unix(),isLoading:!0}}))},i="bot"===(null===(r=We[We.length-1])||void 0===r?void 0:r.from)?[].concat((0,a.Z)(We),[l]):[].concat((0,a.Z)(We.slice(0,We.length-1)),[l]),Se((function(e){return(0,a.Z)(i)})),e.next=5,W({agentID:U.variables.ID,userID:U.userID,bucket:pe,messages:l.messages,safeAgentData:U.variables});case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.useEffect((function(){if(ae.length&&!U.manualControl){var e;H((function(e){return O(O({},e),{},{blockLoading:!0})})),clearTimeout($);var t=setTimeout((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H((function(e){return O(O({},e),{},{blockLoading:!1,loading:!0})})),e.next=3,et(U.userID,{type:"text",payload:ae.join(" ")},We.length?We:null).catch((function(e){}));case 3:re([]);case 4:case"end":return e.stop()}}),e)}))),null===(e=U.variables)||void 0===e?void 0:e.delayBeforeSubmit);return ee(t),function(){clearTimeout(t)}}}),[ae]);var rt=function(e,t,n){H((function(a){return O(O({},a),{},{notice:{message:e,type:t,duration:n,active:!0}})})),setTimeout((function(){H((function(n){return O(O({},n),{},{notice:{message:e,type:t,active:!1}})}))}),n)};function lt(){return(lt=(0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.pl)((0,h.JU)(fe,"voiceglow/".concat(B,"/convos/").concat(U.userID||"UNDEFINED")),{state:"ai-chatting",chatAssignedTo:null,lastModified:d()().unix()},{merge:!0});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e){var t=e.data;"VG_PushMessage"===t.function&&nt(t.payload,!We.length&&"start")}u.useEffect((function(){var t;if(!U.userID&&null!==(t=U.variables)&&void 0!==t&&t.ID){var n,a,r=(Math.random()+1).toString(36).substring(7),l="".concat((null===(n=U.variables)||void 0===n?void 0:n.ID)||"","_").concat(r),i=(null==E?void 0:E.userID)||(null!==(a=e.variables)&&void 0!==a&&a.chatForget||U.variables.chatForget?l:A.userID||U.userID||l);H((function(e){return O(O({},e),{},{userID:i})})),L((function(e){return O(O({},e),{},{userID:i})}))}}),[null===(Z=U.variables)||void 0===Z?void 0:Z.ID]),u.useEffect((function(){var e;null!==(e=U.variables)&&void 0!==e&&e.ID&&U.userID&&0===We.length&&!0===Ee&&!ye&&!1===K&&!U.manualControl&&(X(!0),H((function(e){return O(O({},e),{},{blockInput:!1})})),et(U.userID,"start").catch((function(e){})))}),[U.userID,Ee,ye]),u.useEffect((function(){U.reload&&(Se([]),function(){return lt.apply(this,arguments)}().then((function(){H((function(e){return O(O({},e),{},{reload:!1,blockInput:!1,manualControl:!1,agentName:"",notice:O(O({},e.notice),{},{custom:"",active:!1}),userID:(null==E?void 0:E.userID)||e.userID||"",callOngoing:void 0})})),et((null==E?void 0:E.userID)||U.userID,"start").then((function(){H((function(e){return O(O({},e),{},{notice:O(O({},e.notice),{},{active:!1,custom:""})})}))})).catch((function(e){}))})))}),[U.reload]),u.useEffect((function(){if(U.userID)return window.addEventListener("message",it),window.VG_ADMIN={interact:function(e){return W({agentID:U.variables.ID,userID:U.userID,bucket:pe,safeAgentData:U.variables,action:e,origin:"web-chat"})},pushMessage:function(e){return function(e){var t,n;U.manualControl&&U.userID&&null!==(t=U.variables)&&void 0!==t&&t.ID?W({userID:U.userID,agentID:null===(n=U.variables)||void 0===n?void 0:n.ID,messages:[{from:e.from,type:e.type,item:{payload:{message:e.payload}},delay:e.delay||0,ts:d()().unix()}],bucket:pe,safeAgentData:U.variables}):nt(e.payload)}(e)},reload:function(){return H((function(e){return O(O({},e),{},{reload:!0})}))},getRuntime:function(e){return O(O({},U),{},{turns:We})},setRuntime:function(e){H((function(t){var n=O(O({},t),e);return L(n),n}))}},function(){window.removeEventListener("message",it)}}),[U]);var ot={runtime:U,setRuntime:H,setLocalRuntime:L,handlePushMessage:nt,pushChatNotice:rt,formattedTurnsValue:We,setFormattedTurnsValue:Se,continueInteract:et,isTest:e.isTest,hasLoaded:Ee,lightConvoData:ke,pushHumanTurnLocal:function(e,t){return at.apply(this,arguments)},confirmedBucket:pe,handleRequestHandoffInit:Xe,handleVGHandoffReject:Je,clearNoReplyTimeout:function(){de&&clearTimeout(de)}};return D(_.Provider,{value:ot},e.children)};const Z=C},4070:(e,t,n)=>{n.d(t,{Z:()=>W});var a=n(2982),r=n(2167),l=n(5861),i=n(885),o=n(4687),s=n.n(o),u=n(7693),c=n(2280),d=n(3850),v=n(9660),g=n(2931),p=n(7294),f=n(8676),m=n(381),b=n.n(m),h=n(7828),y=n(7619),x=n(5434),w=n(7516),P=n(9352),I=n(8871),D=n(4149),k=n(1148),O=p.createElement;function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const W=function(e){var t,n,r,o,m,_,W,S=(0,f.useRuntime)(),C=S.runtime,Z=S.setRuntime,E=S.formattedTurnsValue,M=S.confirmedBucket,j=S.setLocalRuntime,z=S.handleVGHandoffReject,B=p.useState(!1),T=(0,i.Z)(B,2),R=T[0],F=T[1],A=p.useState({email:"",message:"",attachmentLinks:[]}),L=(0,i.Z)(A,2),G=L[0],V=L[1],U=p.useState(!1),H=(0,i.Z)(U,2),q=H[0],J=H[1];function K(e){return X.apply(this,arguments)}function X(){return X=(0,l.Z)(s().mark((function e(t){var n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(!0),a=[fetch("".concat((0,k.Sw)({region:"voiceglow-eu"===M?"eu":"na"}),"/vg/").concat(null===(n=C.variables)||void 0===n?void 0:n.ID,"/convos/").concat(C.userID,"/notify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:"email-form",emailForm:t,turns:E,agentData:C.variables})}).then((function(e){return e.json()})),(0,f.handlePushMessageNoInteract)({agentID:C.variables.ID,userID:C.userID,messages:[{from:"human",type:"EmailForm",item:t,delay:0}],bucket:M,safeAgentData:C.variables})],e.next=4,Promise.all(a);case 4:e.sent,F(!1),V({email:"",message:"",attachmentLinks:[]}),J(!1);case 9:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function Y(){return(Y=(0,l.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.cancelToIntent,document.dispatchEvent(new CustomEvent("VG_Events",{detail:{event:"handoff_cancel",data:{chatOpened:!0,ts:b()().unix()},ts:b()().unix()}})),z({cancelToIntent:n}),Z((function(e){return N(N({},e),{},{notice:N(N({},e.notice),{},{custom:"",active:!1})})})),j((function(e){return N(N({},e),{},{notice:N(N({},e.notice),{},{custom:"",active:!1})})}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return O(u.Z,{divKey:"should_cancel_handoff",className:" vg-absolute vg-bottom-0 vg-w-full vg-h-auto vg-z-50 vg-rounded-large vg-notice-container vg-w-full vg-bg-background/50 vg-backdrop-blur vg-handoff--outer-container"},O("div",{className:" vg-p-unit-5 vg-handoff--inner-container"},O("div",{className:" vg-flex vg-flex-col vg-handoff"},O(h.M,null,O(y.E.div,{key:"handoff-cancel-button",className:" vg-w-full vg-mb-2 vg-handoff-cancel--container",layout:!0},O(d.Z,{className:" vg-bg-danger-50 vg-flex vg-gap-2 vg-justify-center vg-items-center vg-w-full vg-handoff-cancel--btn",onPress:function(){!function(e){Y.apply(this,arguments)}({cancelToIntent:e.cancelToIntent})},variant:"light",color:"danger"},O(x.xg7,{className:" vg-w-5 vg-h-5 vg-flex-shrink-0 vg-handoff-cancel--icon"}),O(c.Z,{className:" vg-font-bold ",text:"Cancel Handoff Request",to:null===(t=C.variables)||void 0===t?void 0:t.lang}))),O(y.E.div,{key:"handoff-sendemail-show",className:" vg-w-full vg-mb-2 vg-handoff-email--container",layout:!0},O(d.Z,{color:"primary",onPress:function(){F((function(e){return!e}))},variant:"light",className:" vg-bg-primary-50 vg-text-primary-900 vg-flex vg-justify-center vg-items-center vg-gap-2 vg-w-full vg-handoff-email--btn"},O(w.PRb,{className:" vg-w-5 vg-h-5 vg-flex-shrink-0 vg-handoff-send--icon"}),O(c.Z,R?{className:" vg-font-bold vg-handoff-hide--text",text:"Hide Prompt",to:null===(n=C.variables)||void 0===n?void 0:n.lang}:{className:" vg-font-bold vg-handoff-send--text",text:"Send an Email",to:null===(r=C.variables)||void 0===r?void 0:r.lang}))),R?O(y.E.form,{className:"vg-handoff-email--form",onSubmit:function(e){e.preventDefault(),K(G)},initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},key:"prompt-email"},O(v.Z,{isDisabled:q,value:G.email,onValueChange:function(e){return V((function(t){return N(N({},t),{},{email:e})}))},type:"email",className:" vg-mb-2 vg-font-bold vg-handoff-email--input",classNames:{input:" vg-font-bold "},label:O(c.Z,{text:"Your Email",to:null===(o=C.variables)||void 0===o?void 0:o.lang}),size:"md",variant:"bordered"}),O(g.Z,{isDisabled:q,className:" vg-mb-2 vg-handoff-message--input",endContent:O(I.Z,{noOptions:!0,className:" vg-bg-primary-50 vg-min-w-0 vg-w-8 vg-h-8 vg-handoff-attachments--btn",callback:function(e){return V((function(t){return N(N({},t),{},{attachmentLinks:[].concat((0,a.Z)(t.attachmentLinks),[{sizeKB:e.sizeKB,filename:e.filename,url:e.url}])})}))},buttonProps:{className:"bg-primary-50 w-5 h-5 flex-shrink-0",color:"default",variant:"light"}},O(P.G1z,{className:" vg-w-5 vg-h-5 vg-flex-shrink-0 vg-handoff-attachments--icon"})),value:G.message,onValueChange:function(e){return V((function(t){return N(N({},t),{},{message:e})}))},label:O(c.Z,{text:"Message",to:null===(m=C.variables)||void 0===m?void 0:m.lang}),size:"sm",variant:"bordered"}),null!==(_=G.attachmentLinks)&&void 0!==_&&_.length&&R?O("div",{key:"handoff-attachments",className:" vg-w-full vg-mb-2 vg-handoff-attachments--outer-container"},O("div",{className:" vg-flex vg-flex-col vg-gap-2 vg-handoff-attachments--inner-container"},G.attachmentLinks.map((function(e,t){return O("div",{key:"attachment_".concat(t),className:" vg-flex vg-gap-2 vg-items-center vg-w-full vg-min-w-0 vg-max-w-auto vg-handoff-attachment--container"},O(P.G1z,{className:" vg-w-4 vg-h-4 vg-flex-shrink-0 vg-handoff-attachment--icon"}),O("p",{className:" vg-text-tiny vg-handoff-attachment--text"},e.filename," · ",e.sizeKB," KB"),O(d.Z,{isDisabled:q,onPress:function(){return V((function(e){return N(N({},e),{},{attachmentLinks:e.attachmentLinks.filter((function(e,n){return n!==t}))})}))},isIconOnly:!0,className:" vg-bg-danger-50 vg-min-w-0 vg-w-5 vg-h-5 vg-handoff-attachment-remove--btn",color:"danger",variant:"light"},O(D.QAE,{className:" vg-w-3 vg-h-3 vg-handoff-attachment-remove--icon"})))})))):null,O(d.Z,{isDisabled:q,onPress:function(){return K(G)},color:"primary",size:"sm",variant:"light",className:" vg-bg-primary-50 vg-w-32 vg-handoff-form-submit--btn"},O(c.Z,{className:"vg-handoff-form-submit--label",to:(null===(W=C.variables)||void 0===W?void 0:W.lang)||"en"},"Submit"))):null))))}},1300:(e,t,n)=>{n.d(t,{b:()=>l,s:()=>i});var a=n(381),r=n.n(a),l=[{from:"bot",messages:[{from:"bot",type:"info:danger",item:"Please double check your API key."},{from:"bot",type:"text",item:{payload:{message:"Something went wrong, either the API key is incorrect or you haven't published on VF or you have only a capture request on start (Required to have at least a text message on initialisation)."}}}],ts:r()().unix()}],i=[{from:"bot",messages:[{from:"bot",type:"text",item:{payload:{message:"Hi, Lets get started!"}}},{from:"bot",type:"text",item:{payload:{message:"First copy & paste your VF API key, **don't forget to always publish on VF after making changes.**"}}},{from:"bot",type:"text",item:{payload:{message:"Then on VG press **save > reset agent**, and you're good to go!"}}}],ts:r()().unix()}]},3711:(e,t,n)=>{n.d(t,{l2:()=>l});var a=n(3977),r=n(8650),l=(0,a.ZF)({apiKey:"AIzaSyDa4-xVrMX57smdpqvq3vU_cw_YJHdGK9g",authDomain:"speakwiz-app.firebaseapp.com",projectId:"speakwiz-app",storageBucket:"speakwiz-app.appspot.com",messagingSenderId:"264031558",appId:"1:264031558:web:aaf1b2d3078125841da947",measurementId:"G-WBEN55T42T"});(0,r.getFirestore)(l),(0,r.getFirestore)(l,"voiceglow-eu")}}]);